(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[183],{565:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N});var t=a(5155),r=a(5977),d=a(2580),l=a(285),i=a(6695),n=a(2523),c=a(5057),o=a(1264),m=a(1154),u=a(2115),x=a(2177),h=a(7011),g=a(7328),f=a(6874),j=a.n(f),w=a(5695);function N(){let{locale:e}=(0,w.useParams)(),s=(0,h.A)(),[a,f]=(0,u.useState)(!1),[N,b]=(0,u.useState)(""),[p,M]=(0,u.useState)(!1),{handleSubmit:v,control:k,formState:{errors:A}}=(0,x.mN)({mode:"onSubmit",shouldUseNativeValidation:!1}),P=async a=>{f(!0),b("");try{let r=await fetch("/api/auth/forget-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,redirectTo:"/".concat(e,"/reset-password")})});if(!r.ok){let e="Ein unbekannter Fehler ist aufgetreten.";try{var t;let s=await r.json();e=(null==s||null==(t=s.error)?void 0:t.message)||r.statusText}catch(s){e=r.statusText}throw Error(e)}b(s.formatMessage({id:"ForgotPassword.success",defaultMessage:"Wenn die E-Mail existiert, wurde eine Nachricht zum Zur\xfccksetzen des Passworts gesendet."})),M(!0)}catch(e){b(e instanceof Error?e.message:s.formatMessage({id:"ForgotPassword.error",defaultMessage:"Fehler beim Senden der E-Mail. Bitte versuche es erneut."})),M(!1)}finally{f(!1)}};return(0,t.jsxs)("div",{className:"bg-background flex flex-col",children:[(0,t.jsx)(d.Navigation,{}),(0,t.jsx)(r.M,{className:"h-[calc(100vh-64px)]",size:"xl",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsxs)(i.Zp,{className:"w-full max-w-md mb-20",children:[(0,t.jsxs)(i.aR,{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900",children:(0,t.jsx)(o.A,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),(0,t.jsx)(i.ZB,{children:(0,t.jsx)(g.A,{id:"ForgotPassword.title",defaultMessage:"Passwort vergessen?"})}),(0,t.jsx)(i.BT,{children:(0,t.jsx)(g.A,{id:"ForgotPassword.description",defaultMessage:"Gib deine E-Mail-Adresse ein, um dein Passwort zur\xfcckzusetzen."})})]}),(0,t.jsxs)(i.Wu,{children:[p?(0,t.jsx)("div",{className:"text-center space-y-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:(0,t.jsx)(g.A,{id:"ForgotPassword.successTitle",defaultMessage:"E-Mail gesendet!"})}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,t.jsx)(g.A,{id:"ForgotPassword.success",defaultMessage:"Wenn die E-Mail existiert, wurde eine Nachricht zum Zur\xfccksetzen des Passworts gesendet."})})]})}):(0,t.jsxs)("form",{onSubmit:v(P),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(c.J,{htmlFor:"email",children:(0,t.jsx)(g.A,{id:"ForgotPassword.email",defaultMessage:"E-Mail-Adresse"})}),(0,t.jsx)(x.xI,{name:"email",control:k,defaultValue:"",rules:{required:s.formatMessage({id:"ForgotPassword.validation.emailRequired",defaultMessage:"E-Mail-Adresse ist erforderlich"}),pattern:{value:/\S+@\S+\.\S+/,message:s.formatMessage({id:"ForgotPassword.validation.emailInvalid",defaultMessage:"Ung\xfcltige E-Mail-Adresse"})}},render:e=>{let{field:s}=e;return(0,t.jsx)(n.p,{id:"email",type:"email",placeholder:"m@example.com",className:A.email?"border-red-500":"",...s})}}),A.email&&(0,t.jsx)("span",{className:"text-red-500 text-sm",children:A.email.message})]}),(0,t.jsx)(l.$,{type:"submit",disabled:a,className:"w-full",children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.A,{size:16,className:"animate-spin mr-2"}),(0,t.jsx)(g.A,{id:"ForgotPassword.sending",defaultMessage:"Wird gesendet..."})]}):(0,t.jsx)(g.A,{id:"ForgotPassword.sendButton",defaultMessage:"Passwort-Reset senden"})})]}),N&&!p&&(0,t.jsx)("div",{className:"mt-4 p-3 rounded-md bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800",children:(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:N})}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)(j(),{href:"/".concat(e,"/login"),className:"text-sm text-blue-600 hover:text-blue-500 underline",children:(0,t.jsx)(g.A,{id:"ForgotPassword.backToLogin",defaultMessage:"Zur\xfcck zur Anmeldung"})})})]})]})})})]})}},1154:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1264:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},5466:(e,s,a)=>{Promise.resolve().then(a.bind(a,565))},5977:(e,s,a)=>{"use strict";a.d(s,{M:()=>d});var t=a(5155),r=a(9434);let d=e=>{let{className:s,children:a,size:d}=e;return(0,t.jsx)("div",{className:(0,r.cn)(s),children:(0,t.jsx)("div",{className:"container max-w-".concat(d," mx-auto h-full"),children:a})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[486,274,483,580,203,952,441,684,358],()=>s(5466)),_N_E=e.O()}]);