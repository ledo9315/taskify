(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[395],{646:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1154:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4379:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var r=a(5155),t=a(5977),d=a(2580),l=a(285),i=a(6695),n=a(2523),c=a(5057),o=a(7297);let u=(0,a(9946).A)("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);var m=a(646),x=a(1154),w=a(6874),g=a.n(w),h=a(5695),f=a(2115),j=a(2177),P=a(7011),p=a(7328);function b(){let e=(0,h.useRouter)(),{locale:s}=(0,h.useParams)(),a=(0,h.useSearchParams)(),w=(0,P.A)(),[b,N]=(0,f.useState)(null),[k,v]=(0,f.useState)(!1),[M,y]=(0,f.useState)(""),[R,A]=(0,f.useState)(!1);(0,f.useEffect)(()=>{let e=null==a?void 0:a.get("token");e?N(e):y(w.formatMessage({id:"ResetPassword.error.noToken",defaultMessage:"Kein g\xfcltiger Token gefunden. Bitte fordere einen neuen Link an."}))},[a,w]);let{handleSubmit:z,control:S,watch:E,formState:{errors:L}}=(0,j.mN)({mode:"onSubmit",shouldUseNativeValidation:!1}),T=async a=>{if(b){v(!0),y("");try{let{error:r}=await o.y.resetPassword({newPassword:a.newPassword,token:b});if(r)throw Error(r.message);y(w.formatMessage({id:"ResetPassword.success",defaultMessage:"Dein Passwort wurde erfolgreich zur\xfcckgesetzt."})),A(!0),setTimeout(()=>e.push("/".concat(s,"/login")),3e3)}catch(e){y(e instanceof Error?e.message:w.formatMessage({id:"ResetPassword.error.general",defaultMessage:"Fehler beim Zur\xfccksetzen des Passworts. Der Link k\xf6nnte abgelaufen sein."})),A(!1)}finally{v(!1)}}};return(0,r.jsxs)("div",{className:"bg-background flex flex-col",children:[(0,r.jsx)(d.Navigation,{}),(0,r.jsx)(t.M,{className:"h-[calc(100vh-64px)]",size:"xl",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)(i.Zp,{className:"w-full max-w-md mb-20",children:[(0,r.jsxs)(i.aR,{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900",children:(0,r.jsx)(u,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),(0,r.jsx)(i.ZB,{children:(0,r.jsx)(p.A,{id:"ResetPassword.title",defaultMessage:"Passwort zur\xfccksetzen"})}),(0,r.jsx)(i.BT,{children:(0,r.jsx)(p.A,{id:"ResetPassword.description",defaultMessage:"Gib dein neues Passwort ein."})})]}),(0,r.jsxs)(i.Wu,{children:[R?(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100 dark:bg-green-900",children:(0,r.jsx)(m.A,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:(0,r.jsx)(p.A,{id:"ResetPassword.successTitle",defaultMessage:"Passwort zur\xfcckgesetzt!"})}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:M}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,r.jsx)(p.A,{id:"ResetPassword.redirecting",defaultMessage:"Du wirst in K\xfcrze weitergeleitet..."})})]})]}):(0,r.jsxs)("form",{onSubmit:z(T),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(c.J,{htmlFor:"newPassword",children:(0,r.jsx)(p.A,{id:"ResetPassword.newPassword",defaultMessage:"Neues Passwort"})}),(0,r.jsx)(j.xI,{name:"newPassword",control:S,defaultValue:"",rules:{required:w.formatMessage({id:"ResetPassword.validation.passwordRequired",defaultMessage:"Ein neues Passwort ist erforderlich."}),minLength:{value:8,message:w.formatMessage({id:"ResetPassword.validation.passwordLength",defaultMessage:"Das Passwort muss mindestens 8 Zeichen lang sein."})}},render:e=>{let{field:s}=e;return(0,r.jsx)(n.p,{id:"newPassword",type:"password",className:L.newPassword?"border-red-500":"",...s})}}),L.newPassword&&(0,r.jsx)("span",{className:"text-red-500 text-sm",children:L.newPassword.message})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(c.J,{htmlFor:"confirmPassword",children:(0,r.jsx)(p.A,{id:"ResetPassword.confirmPassword",defaultMessage:"Passwort best\xe4tigen"})}),(0,r.jsx)(j.xI,{name:"confirmPassword",control:S,defaultValue:"",rules:{required:w.formatMessage({id:"ResetPassword.validation.confirmPasswordRequired",defaultMessage:"Passwortbest\xe4tigung ist erforderlich."}),validate:e=>e===E("newPassword")||w.formatMessage({id:"ResetPassword.validation.passwordMismatch",defaultMessage:"Passw\xf6rter stimmen nicht \xfcberein"})},render:e=>{let{field:s}=e;return(0,r.jsx)(n.p,{id:"confirmPassword",type:"password",className:L.confirmPassword?"border-red-500":"",...s})}}),L.confirmPassword&&(0,r.jsx)("span",{className:"text-red-500 text-sm",children:L.confirmPassword.message})]}),(0,r.jsx)(l.$,{type:"submit",disabled:k||!b,className:"w-full",children:k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.A,{size:16,className:"animate-spin mr-2"}),(0,r.jsx)(p.A,{id:"ResetPassword.saving",defaultMessage:"Wird gespeichert..."})]}):(0,r.jsx)(p.A,{id:"ResetPassword.saveButton",defaultMessage:"Neues Passwort speichern"})})]}),M&&!R&&(0,r.jsx)("div",{className:"mt-4 p-3 rounded-md bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800",children:(0,r.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:M})}),!R&&(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsx)(g(),{href:"/".concat(s,"/login"),className:"text-sm text-blue-600 hover:text-blue-500 underline",children:(0,r.jsx)(p.A,{id:"ResetPassword.backToLogin",defaultMessage:"Zur\xfcck zur Anmeldung"})})})]})]})})})]})}},5977:(e,s,a)=>{"use strict";a.d(s,{M:()=>d});var r=a(5155),t=a(9434);let d=e=>{let{className:s,children:a,size:d}=e;return(0,r.jsx)("div",{className:(0,t.cn)(s),children:(0,r.jsx)("div",{className:"container max-w-".concat(d," mx-auto h-full"),children:a})})}},7297:(e,s,a)=>{"use strict";a.d(s,{y:()=>r});let r=(0,a(9659).MB)({baseURL:"http://localhost:3000"})},8560:(e,s,a)=>{Promise.resolve().then(a.bind(a,4379))}},e=>{var s=s=>e(e.s=s);e.O(0,[486,274,483,659,580,203,952,441,684,358],()=>s(8560)),_N_E=e.O()}]);